
<!-- saved from url=(0073)file:///C:/Users/thelo/Desktop/ff7800ab-5e69-4996-86f5-dfccd5ac9f46.html# -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><style>*, ::before, ::after{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }/* ! tailwindcss v3.4.17 | MIT License | https://tailwindcss.com */*,::after,::before{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}::after,::before{--tw-content:''}:host,html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.sticky{position:sticky}.bottom-0{bottom:0px}.left-3{left:0.75rem}.top-0{top:0px}.top-1\/2{top:50%}.top-10{top:2.5rem}.z-10{z-index:10}.z-50{z-index:50}.mx-auto{margin-left:auto;margin-right:auto}.mb-1{margin-bottom:0.25rem}.mb-2{margin-bottom:0.5rem}.mb-3{margin-bottom:0.75rem}.mb-4{margin-bottom:1rem}.mb-6{margin-bottom:1.5rem}.mb-8{margin-bottom:2rem}.mr-1{margin-right:0.25rem}.mr-2{margin-right:0.5rem}.mt-2{margin-top:0.5rem}.mt-4{margin-top:1rem}.mt-6{margin-top:1.5rem}.flex{display:flex}.grid{display:grid}.hidden{display:none}.h-10{height:2.5rem}.h-16{height:4rem}.h-20{height:5rem}.h-full{height:100%}.w-10{width:2.5rem}.w-16{width:4rem}.w-20{width:5rem}.w-full{width:100%}.max-w-md{max-width:28rem}.flex-1{flex:1 1 0%}.-translate-y-1\/2{--tw-translate-y:-50%;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.transform{transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.grid-cols-2{grid-template-columns:repeat(2, minmax(0, 1fr))}.grid-cols-4{grid-template-columns:repeat(4, minmax(0, 1fr))}.items-center{align-items:center}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-2{gap:0.5rem}.gap-3{gap:0.75rem}.space-y-2 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(0.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0.5rem * var(--tw-space-y-reverse))}.space-y-3 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(0.75rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0.75rem * var(--tw-space-y-reverse))}.space-y-4 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:0.5rem}.border{border-width:1px}.border-amber-500\/30{border-color:rgb(245 158 11 / 0.3)}.border-rose-500{--tw-border-opacity:1;border-color:rgb(244 63 94 / var(--tw-border-opacity, 1))}.border-slate-600{--tw-border-opacity:1;border-color:rgb(71 85 105 / var(--tw-border-opacity, 1))}.bg-amber-500\/10{background-color:rgb(245 158 11 / 0.1)}.bg-purple-600{--tw-bg-opacity:1;background-color:rgb(147 51 234 / var(--tw-bg-opacity, 1))}.bg-sky-600{--tw-bg-opacity:1;background-color:rgb(2 132 199 / var(--tw-bg-opacity, 1))}.bg-slate-700{--tw-bg-opacity:1;background-color:rgb(51 65 85 / var(--tw-bg-opacity, 1))}.bg-slate-800{--tw-bg-opacity:1;background-color:rgb(30 41 59 / var(--tw-bg-opacity, 1))}.bg-slate-900{--tw-bg-opacity:1;background-color:rgb(15 23 42 / var(--tw-bg-opacity, 1))}.bg-slate-900\/95{background-color:rgb(15 23 42 / 0.95)}.p-3{padding:0.75rem}.p-4{padding:1rem}.px-3{padding-left:0.75rem;padding-right:0.75rem}.py-1{padding-top:0.25rem;padding-bottom:0.25rem}.py-2{padding-top:0.5rem;padding-bottom:0.5rem}.py-3{padding-top:0.75rem;padding-bottom:0.75rem}.py-4{padding-top:1rem;padding-bottom:1rem}.pb-20{padding-bottom:5rem}.text-center{text-align:center}.text-2xl{font-size:1.5rem;line-height:2rem}.text-4xl{font-size:2.25rem;line-height:2.5rem}.text-\[10px\]{font-size:10px}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:0.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-xs{font-size:0.75rem;line-height:1rem}.font-bold{font-weight:700}.text-amber-200{--tw-text-opacity:1;color:rgb(253 230 138 / var(--tw-text-opacity, 1))}.text-emerald-400{--tw-text-opacity:1;color:rgb(52 211 153 / var(--tw-text-opacity, 1))}.text-purple-400{--tw-text-opacity:1;color:rgb(192 132 252 / var(--tw-text-opacity, 1))}.text-rose-400{--tw-text-opacity:1;color:rgb(251 113 133 / var(--tw-text-opacity, 1))}.text-sky-400{--tw-text-opacity:1;color:rgb(56 189 248 / var(--tw-text-opacity, 1))}.text-slate-300{--tw-text-opacity:1;color:rgb(203 213 225 / var(--tw-text-opacity, 1))}.text-slate-400{--tw-text-opacity:1;color:rgb(148 163 184 / var(--tw-text-opacity, 1))}.text-slate-500{--tw-text-opacity:1;color:rgb(100 116 139 / var(--tw-text-opacity, 1))}.text-slate-600{--tw-text-opacity:1;color:rgb(71 85 105 / var(--tw-text-opacity, 1))}.text-white{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}</style></head><body><br><br><br>    <br>    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><br>    <meta name="theme-color" content="#0f172a"><br>    <title>MachineLog Enterprise</title><br>    <br>    <!-- Firebase for Cloud Sync --><br>    <script src="./Index_files/firebase-app-compat.js.download"></script><br>    <script src="./Index_files/firebase-database-compat.js.download"></script><br>    <script src="./Index_files/firebase-auth-compat.js.download"></script><br>    <br>    <script src="./Index_files/saved_resource"></script><br>    <link href="./Index_files/all.min.css" rel="stylesheet"><br>    <br>    <style><br>        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600;700&family=Inter:wght@300;400;600;700&display=swap');<br>        <br>        * { -webkit-tap-highlight-color: transparent; box-sizing: border-box; }<br>        <br>        body {<br>            font-family: 'Inter', sans-serif;<br>            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);<br>            color: #e2e8f0;<br>            min-height: 100vh;<br>            margin: 0;<br>            padding-bottom: 80px;<br>        }<br>        <br>        .mono { font-family: 'JetBrains Mono', monospace; }<br>        <br>        .glass-card {<br>            background: rgba(15, 23, 42, 0.8);<br>            border: 1px solid rgba(51, 65, 85, 0.5);<br>            border-radius: 12px;<br>            backdrop-filter: blur(10px);<br>        }<br>        <br>        .machine-card {<br>            transition: all 0.2s;<br>            cursor: pointer;<br>        }<br>        <br>        .machine-card:active { transform: scale(0.98); }<br>        <br>        .admin-badge { background: linear-gradient(135deg, #8b5cf6 0%, #6d28d9 100%); }<br>        .tech-badge { background: linear-gradient(135deg, #0ea5e9 0%, #0284c7 100%); }<br>        <br>        .btn-primary {<br>            background: linear-gradient(135deg, #0ea5e9 0%, #0284c7 100%);<br>            border: none;<br>            color: white;<br>            padding: 12px 24px;<br>            border-radius: 8px;<br>            font-weight: 600;<br>            cursor: pointer;<br>            transition: all 0.2s;<br>        }<br>        <br>        .btn-primary:active { transform: scale(0.95); }<br>        <br>        .btn-danger {<br>            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);<br>            border: none;<br>            color: white;<br>            padding: 10px 20px;<br>            border-radius: 8px;<br>            cursor: pointer;<br>        }<br>        <br>        .input-field {<br>            background: rgba(30, 41, 59, 0.8);<br>            border: 1px solid #475569;<br>            color: white;<br>            padding: 12px;<br>            border-radius: 8px;<br>            width: 100%;<br>            font-size: 16px;<br>        }<br>        <br>        .input-field:focus {<br>            outline: none;<br>            border-color: #0ea5e9;<br>        }<br>        <br>        .modal {<br>            display: none;<br>            position: fixed;<br>            inset: 0;<br>            background: rgba(2, 6, 23, 0.95);<br>            z-index: 100;<br>            overflow-y: auto;<br>        }<br>        <br>        .modal.active { display: block; }<br>        <br>        .tag {<br>            display: inline-block;<br>            padding: 4px 12px;<br>            border-radius: 20px;<br>            font-size: 11px;<br>            font-weight: 600;<br>            text-transform: uppercase;<br>        }<br>        <br>        .status-operational { background: #10b981; color: white; }<br>        .status-maintenance { background: #f59e0b; color: white; }<br>        .status-down { background: #ef4444; color: white; }<br>        <br>        .bottom-nav {<br>            position: fixed;<br>            bottom: 0;<br>            left: 0;<br>            right: 0;<br>            background: rgba(15, 23, 42, 0.95);<br>            border-top: 1px solid #334155;<br>            display: flex;<br>            justify-content: space-around;<br>            padding: 10px 0;<br>            z-index: 50;<br>        }<br>        <br>        .nav-item {<br>            color: #64748b;<br>            text-decoration: none;<br>            display: flex;<br>            flex-direction: column;<br>            align-items: center;<br>            font-size: 12px;<br>            padding: 5px 15px;<br>        }<br>        <br>        .nav-item.active { color: #0ea5e9; }<br>        <br>        .notification-dot {<br>            position: absolute;<br>            top: 5px;<br>            right: 5px;<br>            width: 8px;<br>            height: 8px;<br>            background: #ef4444;<br>            border-radius: 50%;<br>        }<br>        <br>        .photo-grid {<br>            display: grid;<br>            grid-template-columns: repeat(3, 1fr);<br>            gap: 10px;<br>            margin: 10px 0;<br>        }<br>        <br>        .photo-thumb {<br>            aspect-ratio: 1;<br>            background: #1e293b;<br>            border-radius: 8px;<br>            overflow: hidden;<br>            position: relative;<br>        }<br>        <br>        .photo-thumb img {<br>            width: 100%;<br>            height: 100%;<br>            object-fit: cover;<br>        }<br>        <br>        .sync-status {<br>            position: fixed;<br>            top: 10px;<br>            right: 10px;<br>            padding: 6px 12px;<br>            border-radius: 20px;<br>            font-size: 11px;<br>            font-weight: 600;<br>            z-index: 1000;<br>        }<br>        <br>        .sync-online { background: #10b981; color: white; }<br>        .sync-offline { background: #f59e0b; color: white; }<br>        <br>        .approval-card {<br>            border-left: 4px solid #f59e0b;<br>            background: rgba(245, 158, 11, 0.1);<br>            padding: 15px;<br>            margin-bottom: 10px;<br>            border-radius: 0 8px 8px 0;<br>        }<br>        <br>        .search-highlight {<br>            background: rgba(245, 158, 11, 0.4);<br>            color: #fbbf24;<br>            padding: 0 2px;<br>            border-radius: 2px;<br>        }<br>        <br>        .hidden { display: none !important; }<br>    </style><br><br><br><br>    <!-- Sync Status --><br>    <div id="syncStatus" class="sync-status sync-offline"><br>        <i class="fas fa-wifi-slash"></i> Offline<br>    </div><br><br>    <!-- Role Badge --><br>    <div id="roleBadge" class="fixed top-10 left-3 z-50 px-3 py-1 rounded-full text-xs font-bold text-white hidden"><br>        ADMIN<br>    </div><br><br>    <!-- Main Container --><br>    <div id="app" class="p-4 max-w-md mx-auto"><br>        <br>        <!-- Header --><br>        <div class="flex justify-between items-center mb-6"><br>            <div><br>                <h1 class="text-2xl font-bold text-white">MachineLog</h1><br>                <p class="text-xs text-slate-400">Enterprise Edition</p><br>            </div><br>            <button onclick="showProfile()" class="w-10 h-10 rounded-full bg-slate-700 flex items-center justify-center text-white"><br>                <i class="fas fa-user"></i><br>            </button><br>        </div><br><br>        <!-- Stats --><br>        <div class="grid grid-cols-4 gap-2 mb-6"><br>            <div class="glass-card p-3 text-center"><br>                <div class="text-xl font-bold text-emerald-400" id="statTotal">0</div><br>                <div class="text-[10px] text-slate-400">Machines</div><br>            </div><br>            <div class="glass-card p-3 text-center"><br>                <div class="text-xl font-bold text-sky-400" id="statOp">0</div><br>                <div class="text-[10px] text-slate-400">Running</div><br>            </div><br>            <div class="glass-card p-3 text-center"><br>                <div class="text-xl font-bold text-rose-400" id="statDown">0</div><br>                <div class="text-[10px] text-slate-400">Down</div><br>            </div><br>            <div class="glass-card p-3 text-center"><br>                <div class="text-xl font-bold text-purple-400" id="statPending">0</div><br>                <div class="text-[10px] text-slate-400">Pending</div><br>            </div><br>        </div><br><br>        <!-- Search --><br>        <div class="relative mb-4"><br>            <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400"></i><br>            <input type="text" id="searchInput" placeholder="Search machines..." <br="">                   class="input-field pl-10" oninput="filterMachines()"&gt;<br>        </div><br><br>        <!-- Machines List --><br>        <div id="machinesList" class="space-y-3"><br>            <!-- Machines rendered here --><br>        </div><br>    </div><br><br>    <!-- Machine Detail Modal --><br>    <div id="machineModal" class="modal"><br>        <div class="p-4 max-w-md mx-auto"><br>            <div class="flex justify-between items-center mb-4 sticky top-0 bg-slate-900/95 py-2 z-10"><br>                <h2 id="modalTitle" class="text-xl font-bold">Machine</h2><br>                <button onclick="closeModal(&#39;machineModal&#39;)" class="text-slate-400 text-2xl"><br>                    <i class="fas fa-times"></i><br>                </button><br>            </div><br>            <br>            <div id="machineDetails" class="mb-4"><br>                <!-- Details --><br>            </div><br><br>            <div class="flex gap-2 mb-4"><br>                <button onclick="showAddLog()" class="btn-primary flex-1"><br>                    <i class="fas fa-plus mr-2"></i>Add Log<br>                </button><br>                <button onclick="showBreakdowns()" class="btn-danger flex-1"><br>                    <i class="fas fa-list mr-2"></i>History<br>                </button><br>            </div><br><br>            <div id="logsList" class="space-y-3 pb-20"><br>                <!-- Logs --><br>            </div><br>        </div><br>    </div><br><br>    <!-- Add Log Modal --><br>    <div id="addLogModal" class="modal"><br>        <div class="p-4 max-w-md mx-auto"><br>            <h2 class="text-xl font-bold mb-4">Add Log Entry</h2><br>            <br>            <form id="logForm" onsubmit="submitLog(event)"><br>                <div class="space-y-3"><br>                    <input type="datetime-local" name="date" required="" class="input-field"><br>                    <br>                    <select name="type" class="input-field" onchange="toggleSeverity(this.value)"><br>                        <option value="breakdown">Breakdown/Alarm</option><br>                        <option value="maintenance">Maintenance</option><br>                        <option value="repair">Repair</option><br>                    </select><br>                    <br>                    <select id="severityField" name="severity" class="input-field"><br>                        <option value="low">Low Severity</option><br>                        <option value="medium" selected="">Medium Severity</option><br>                        <option value="high">High Severity</option><br>                        <option value="critical">Critical</option><br>                    </select><br>                    <br>                    <input type="text" name="alarmCode" placeholder="Alarm Code (e.g., ERR-404)" class="input-field mono"><br>                    <br>                    <textarea name="issue" placeholder="Issue Description *" required="" rows="3" class="input-field"></textarea><br>                    <br>                    <textarea name="solution" placeholder="Solution/Fix Applied *" required="" rows="3" class="input-field"></textarea><br>                    <br>                    <!-- Photos --><br>                    <div class="glass-card p-3"><br>                        <div class="flex justify-between items-center mb-2"><br>                            <span class="text-sm text-slate-300">Photos</span><br>                            <span id="photoCount" class="text-xs text-slate-400">0</span><br>                        </div><br>                        <div id="photoPreview" class="photo-grid"></div><br>                        <div class="flex gap-2 mt-2"><br>                            <button type="button" onclick="takePhoto()" class="flex-1 py-2 bg-purple-600 rounded-lg text-sm"><br>                                <i class="fas fa-camera mr-1"></i> Camera<br>                            </button><br>                            <button type="button" onclick="selectPhoto()" class="flex-1 py-2 bg-slate-700 rounded-lg text-sm"><br>                                <i class="fas fa-images mr-1"></i> Gallery<br>                            </button><br>                        </div><br>                        <input type="file" id="photoInput" accept="image/*" multiple="" class="hidden" onchange="handlePhotos(this)"><br>                    </div><br>                    <br>                    <!-- Parts --><br>                    <div class="glass-card p-3"><br>                        <div class="text-sm text-slate-300 mb-2">Parts Replaced</div><br>                        <div id="partsList" class="space-y-2"></div><br>                        <button type="button" onclick="addPart()" class="text-sky-400 text-sm mt-2"><br>                            <i class="fas fa-plus mr-1"></i> Add Part<br>                        </button><br>                    </div><br>                    <br>                    <input type="text" name="technician" placeholder="Technician Name *" required="" class="input-field"><br>                    <br>                    <input type="number" name="duration" step="0.5" placeholder="Duration (hours)" class="input-field"><br>                    <br>                    <div class="bg-amber-500/10 border border-amber-500/30 rounded-lg p-3 text-sm text-amber-200"><br>                        <i class="fas fa-info-circle mr-2"></i><br>                        This will be submitted for admin approval<br>                    </div><br>                </div><br>                <br>                <div class="flex gap-3 mt-6 sticky bottom-0 bg-slate-900 py-4"><br>                    <button type="button" onclick="closeModal(&#39;addLogModal&#39;)" class="flex-1 py-3 border border-slate-600 rounded-lg">Cancel</button><br>                    <button type="submit" class="btn-primary flex-1">Submit for Approval</button><br>                </div><br>            </form><br>        </div><br>    </div><br><br>    <!-- Alarm Search Modal --><br>    <div id="searchModal" class="modal"><br>        <div class="p-4 max-w-md mx-auto"><br>            <div class="flex justify-between items-center mb-4"><br>                <h2 class="text-xl font-bold">Alarm Search</h2><br>                <button onclick="closeModal(&#39;searchModal&#39;)" class="text-slate-400 text-2xl"><br>                    <i class="fas fa-times"></i><br>                </button><br>            </div><br>            <br>            <input type="text" id="alarmSearch" placeholder="Enter alarm code..." <br="">                   class="input-field mb-4" onkeyup="if(event.key==='Enter')searchAlarms()"&gt;<br>            <br>            <button onclick="searchAlarms()" class="btn-primary w-full mb-4"><br>                <i class="fas fa-search mr-2"></i>Search History<br>            </button><br>            <br>            <div id="searchResults" class="space-y-3 pb-20"><br>                <!-- Results --><br>            </div><br>        </div><br>    </div><br><br>    <!-- Admin Panel Modal --><br>    <div id="adminModal" class="modal"><br>        <div class="p-4 max-w-md mx-auto"><br>            <div class="flex justify-between items-center mb-4 sticky top-0 bg-slate-900/95 py-2"><br>                <div class="flex items-center gap-2"><br>                    <i class="fas fa-shield-alt text-purple-400 text-xl"></i><br>                    <h2 class="text-xl font-bold">Admin Panel</h2><br>                </div><br>                <button onclick="closeModal(&#39;adminModal&#39;)" class="text-slate-400 text-2xl"><br>                    <i class="fas fa-times"></i><br>                </button><br>            </div><br>            <br>            <div class="flex gap-2 mb-4"><br>                <button onclick="showAdminTab(&#39;pending&#39;)" id="tab-pending" class="flex-1 py-2 bg-purple-600 rounded-lg text-sm font-bold"><br>                    Pending (<span id="pendingBadge">0</span>)<br>                </button><br>                <button onclick="showAdminTab(&#39;codes&#39;)" id="tab-codes" class="flex-1 py-2 bg-slate-700 rounded-lg text-sm"><br>                    Codes<br>                </button><br>            </div><br>            <br>            <div id="adminContent" class="pb-20"><br>                <!-- Admin content --><br>            </div><br>        </div><br>    </div><br><br>    <!-- Profile/Login Modal --><br>    <div id="profileModal" class="modal"><br>        <div class="p-4 max-w-md mx-auto h-full flex items-center"><br>            <div class="w-full"><br>                <div class="text-center mb-8"><br>                    <div class="w-20 h-20 mx-auto mb-4 rounded-full bg-slate-800 flex items-center justify-center text-4xl text-slate-600"><br>                        <i class="fas fa-lock"></i><br>                    </div><br>                    <h2 class="text-2xl font-bold mb-2">Secure Access</h2><br>                    <p class="text-slate-400 text-sm">Enter your access code</p><br>                </div><br>                <br>                <div id="loginForm" class="space-y-4"><br>                    <input type="password" id="accessCode" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢" maxlength="6" <br="">                           class="input-field text-center text-2xl tracking-widest" style="font-size: 32px;"&gt;<br>                    <br>                    <div class="grid grid-cols-2 gap-3"><br>                        <button onclick="login(&#39;technician&#39;)" class="py-4 bg-sky-600 rounded-lg font-bold text-white"><br>                            <i class="fas fa-wrench mr-2"></i>Technician<br>                        </button><br>                        <button onclick="login(&#39;admin&#39;)" class="py-4 bg-purple-600 rounded-lg font-bold text-white"><br>                            <i class="fas fa-shield-alt mr-2"></i>Admin<br>                        </button><br>                    </div><br>                    <br>                    <p class="text-center text-xs text-slate-500 mt-4"><br>                        Default: TECH12 (Tech) / ADMIN9 (Admin)<br>                    </p><br>                </div><br>                <br>                <div id="profileInfo" class="hidden space-y-4"><br>                    <div class="glass-card p-4 text-center"><br>                        <div id="profileIcon" class="w-16 h-16 mx-auto mb-3 rounded-full bg-purple-600 flex items-center justify-center text-2xl"><br>                            <i class="fas fa-user-shield"></i><br>                        </div><br>                        <h3 id="profileName" class="text-xl font-bold">Administrator</h3><br>                        <p id="profileRole" class="text-slate-400 text-sm">Full Access</p><br>                    </div><br>                    <br>                    <button onclick="logout()" class="w-full py-4 border border-rose-500 text-rose-400 rounded-lg font-bold"><br>                        <i class="fas fa-sign-out-alt mr-2"></i>Logout<br>                    </button><br>                </div><br>            </div><br>        </div><br>    </div><br><br>    <!-- Bottom Navigation --><br>    <nav class="bottom-nav"><br>        <a href="file:///C:/Users/thelo/Desktop/ff7800ab-5e69-4996-86f5-dfccd5ac9f46.html#" onclick="showMain(); return false;" class="nav-item active" id="nav-home"><br>            <i class="fas fa-home text-lg mb-1"></i><br>            <span>Machines</span><br>        </a><br>        <a href="file:///C:/Users/thelo/Desktop/ff7800ab-5e69-4996-86f5-dfccd5ac9f46.html#" onclick="showSearch(); return false;" class="nav-item" id="nav-search"><br>            <i class="fas fa-search text-lg mb-1"></i><br>            <span>Search</span><br>        </a><br>        <a href="file:///C:/Users/thelo/Desktop/ff7800ab-5e69-4996-86f5-dfccd5ac9f46.html#" onclick="showAdmin(); return false;" class="nav-item relative" id="nav-admin"><br>            <i class="fas fa-shield-alt text-lg mb-1"></i><br>            <span>Admin</span><br>            <span id="adminDot" class="notification-dot hidden"></span><br>        </a><br>        <a href="file:///C:/Users/thelo/Desktop/ff7800ab-5e69-4996-86f5-dfccd5ac9f46.html#" onclick="showProfile(); return false;" class="nav-item" id="nav-profile"><br>            <i class="fas fa-user text-lg mb-1"></i><br>            <span>Profile</span><br>        </a><br>    </nav><br><br>    <!-- Firebase Config - REPLACE WITH YOURS --><br>    <script><br>        // ðŸ”¥ REPLACE THIS WITH YOUR FIREBASE CONFIG<br>        const firebaseConfig = {<br>            apiKey: "YOUR_API_KEY",<br>            authDomain: "your-app.firebaseapp.com",<br>            databaseURL: "https://your-app-default-rtdb.firebaseio.com",<br>            projectId: "your-app",<br>            storageBucket: "your-app.appspot.com",<br>            messagingSenderId: "123456789",<br>            appId: "your-app-id"<br>        };<br><br>        // Initialize Firebase<br>        let app, database, auth;<br>        let isOnline = false;<br>        <br>        try {<br>            if (firebaseConfig.apiKey !== "YOUR_API_KEY") {<br>                app = firebase.initializeApp(firebaseConfig);<br>                database = firebase.database();<br>                auth = firebase.auth();<br>                isOnline = true;<br>            }<br>        } catch (e) {<br>            console.log("Firebase not configured, using offline mode");<br>        }<br>    </script><br><br>    <script><br>        // App State<br>        const ACCESS_CODES = { technician: 'TECH12', admin: 'ADMIN9' };<br>        let currentUser = null;<br>        let machines = [];<br>        let pendingApprovals = [];<br>        let currentMachineId = null;<br>        let pendingPhotos = [];<br><br>        // Demo Data<br>        const demoData = [<br>            {<br>                id: 'CNC-001',<br>                name: 'CNC Lathe Alpha',<br>                status: 'operational',<br>                location: 'Line A',<br>                manufacturer: 'Haas',<br>                logs: [{<br>                    id: 1,<br>                    date: '2024-01-15T09:30',<br>                    type: 'breakdown',<br>                    severity: 'high',<br>                    alarmCode: 'SPINDLE_ERR_01',<br>                    issue: 'Spindle overheating',<br>                    solution: 'Replaced bearings, recalibrated sensors',<br>                    parts: [{name: 'Bearing', partNumber: 'SB-2205', qty: 2}],<br>                    technician: 'Mike J',<br>                    duration: 4.5,<br>                    approved: true,<br>                    approvedBy: 'Admin',<br>                    approvedAt: '2024-01-15T10:00'<br>                }]<br>            },<br>            {<br>                id: 'HYD-001',<br>                name: 'Hydraulic Press',<br>                status: 'down',<br>                location: 'Press Shop',<br>                manufacturer: 'Komatsu',<br>                logs: [{<br>                    id: 2,<br>                    date: '2024-02-20T08:15',<br>                    type: 'breakdown',<br>                    severity: 'critical',<br>                    alarmCode: 'HYD_PRESSURE_LOW',<br>                    issue: 'Pressure dropped to 20 bar',<br>                    solution: 'Replaced pump, flushed system',<br>                    parts: [<br>                        {name: 'Hydraulic Pump', partNumber: 'HP-2000', qty: 1},<br>                        {name: 'Oil', partNumber: 'ISO-46', qty: 100}<br>                    ],<br>                    technician: 'Sarah C',<br>                    duration: 8,<br>                    approved: true,<br>                    approvedBy: 'Admin',<br>                    approvedAt: '2024-02-20T15:30'<br>                }]<br>            }<br>        ];<br><br>        // Initialize<br>        document.addEventListener('DOMContentLoaded', () => {<br>            loadData();<br>            checkSession();<br>            updateSyncStatus();<br>            <br>            // Set default datetime<br>            const now = new Date();<br>            now.setMinutes(now.getMinutes() - now.getTimezoneOffset());<br>            document.querySelector('input[name="date"]').value = now.toISOString().slice(0, 16);<br>        });<br><br>        // Data Management<br>        async function loadData() {<br>            if (isOnline && database) {<br>                // Load from Firebase<br>                database.ref('machines').on('value', (snap) => {<br>                    machines = snap.val() ? Object.values(snap.val()) : demoData;<br>                    renderMachines();<br>                    updateStats();<br>                });<br>                <br>                database.ref('pendingApprovals').on('value', (snap) => {<br>                    pendingApprovals = snap.val() ? Object.values(snap.val()) : [];<br>                    updatePendingCount();<br>                });<br>            } else {<br>                // Offline mode<br>                machines = JSON.parse(localStorage.getItem('machines')) || demoData;<br>                pendingApprovals = JSON.parse(localStorage.getItem('pending')) || [];<br>                renderMachines();<br>                updateStats();<br>                updatePendingCount();<br>            }<br>        }<br><br>        async function saveData() {<br>            if (isOnline && database) {<br>                await database.ref('machines').set(machines.reduce((acc, m) => ({...acc, [m.id]: m}), {}));<br>            } else {<br>                localStorage.setItem('machines', JSON.stringify(machines));<br>            }<br>        }<br><br>        // Camera Functions<br>        function takePhoto() {<br>            document.getElementById('photoInput').click();<br>        }<br><br>        function selectPhoto() {<br>            document.getElementById('photoInput').click();<br>        }<br><br>        function handlePhotos(input) {<br>            Array.from(input.files).forEach(file => {<br>                if (file.size > 5 * 1024 * 1024) {<br>                    alert('Image too large (max 5MB)');<br>                    return;<br>                }<br>                pendingPhotos.push(file);<br>                <br>                const reader = new FileReader();<br>                reader.onload = (e) => {<br>                    const div = document.createElement('div');<br>                    div.className = 'photo-thumb';<br>                    div.innerHTML = `<img src="${e.target.result}">`;<br>                    document.getElementById('photoPreview').appendChild(div);<br>                };<br>                reader.readAsDataURL(file);<br>            });<br>            document.getElementById('photoCount').textContent = pendingPhotos.length;<br>        }<br><br>        // Authentication<br>        function checkSession() {<br>            const saved = localStorage.getItem('session');<br>            if (saved) {<br>                currentUser = JSON.parse(saved);<br>                applyRole();<br>            } else {<br>                showModal('profileModal');<br>            }<br>        }<br><br>        function login(role) {<br>            const code = document.getElementById('accessCode').value.toUpperCase();<br>            if (code === ACCESS_CODES[role]) {<br>                currentUser = {<br>                    role: role,<br>                    name: role === 'admin' ? 'Administrator' : 'Technician',<br>                    id: Date.now().toString()<br>                };<br>                localStorage.setItem('session', JSON.stringify(currentUser));<br>                applyRole();<br>                closeModal('profileModal');<br>            } else {<br>                alert('Invalid code');<br>            }<br>        }<br><br>        function applyRole() {<br>            document.getElementById('roleBadge').classList.remove('hidden');<br>            document.getElementById('roleBadge').className = `fixed top-10 left-3 z-50 px-3 py-1 rounded-full text-xs font-bold text-white ${currentUser.role === 'admin' ? 'admin-badge' : 'tech-badge'}`;<br>            document.getElementById('roleBadge').textContent = currentUser.role === 'admin' ? 'ADMIN' : 'TECH';<br>            <br>            if (currentUser.role === 'admin') {<br>                document.getElementById('loginForm').classList.add('hidden');<br>                document.getElementById('profileInfo').classList.remove('hidden');<br>                document.getElementById('profileIcon').className = 'w-16 h-16 mx-auto mb-3 rounded-full bg-purple-600 flex items-center justify-center text-2xl';<br>                document.getElementById('profileName').textContent = 'Administrator';<br>            } else {<br>                document.getElementById('loginForm').classList.add('hidden');<br>                document.getElementById('profileInfo').classList.remove('hidden');<br>                document.getElementById('profileIcon').className = 'w-16 h-16 mx-auto mb-3 rounded-full bg-sky-600 flex items-center justify-center text-2xl';<br>                document.getElementById('profileName').textContent = 'Technician';<br>                document.getElementById('profileRole').textContent = 'Limited Access';<br>            }<br>        }<br><br>        function logout() {<br>            localStorage.removeItem('session');<br>            location.reload();<br>        }<br><br>        // Approval Workflow<br>        async function submitLog(e) {<br>            e.preventDefault();<br>            const form = e.target;<br>            <br>            const parts = [];<br>            document.querySelectorAll('#partsList > div').forEach(div => {<br>                const inputs = div.querySelectorAll('input');<br>                if (inputs[0].value) {<br>                    parts.push({<br>                        name: inputs[0].value,<br>                        partNumber: inputs[1].value,<br>                        qty: inputs[2].value<br>                    });<br>                }<br>            });<br><br>            const request = {<br>                id: Date.now().toString(),<br>                type: 'new_log',<br>                machineId: currentMachineId,<br>                machineName: machines.find(m => m.id === currentMachineId).name,<br>                submittedBy: currentUser.name,<br>                submittedAt: new Date().toISOString(),<br>                status: 'pending',<br>                data: {<br>                    date: form.date.value,<br>                    type: form.type.value,<br>                    severity: form.severity.value,<br>                    alarmCode: form.alarmCode.value,<br>                    issue: form.issue.value,<br>                    solution: form.solution.value,<br>                    parts: parts,<br>                    technician: form.technician.value,<br>                    duration: form.duration.value,<br>                    photos: pendingPhotos.length<br>                }<br>            };<br><br>            pendingApprovals.push(request);<br>            <br>            if (isOnline && database) {<br>                await database.ref('pendingApprovals/' + request.id).set(request);<br>            } else {<br>                localStorage.setItem('pending', JSON.stringify(pendingApprovals));<br>            }<br>            <br>            updatePendingCount();<br>            closeModal('addLogModal');<br>            form.reset();<br>            pendingPhotos = [];<br>            document.getElementById('photoPreview').innerHTML = '';<br>            alert('Submitted for admin approval!');<br>        }<br><br>        async function approveRequest(id) {<br>            const req = pendingApprovals.find(p => p.id === id);<br>            if (!req) return;<br><br>            if (req.type === 'new_log') {<br>                const machine = machines.find(m => m.id === req.machineId);<br>                machine.logs.push({<br>                    ...req.data,<br>                    id: Date.now(),<br>                    approved: true,<br>                    approvedBy: currentUser.name,<br>                    approvedAt: new Date().toISOString()<br>                });<br>                if (req.data.type === 'breakdown') machine.status = 'down';<br>                if (req.data.type === 'repair') machine.status = 'operational';<br>                await saveData();<br>            }<br><br>            pendingApprovals = pendingApprovals.filter(p => p.id !== id);<br>            <br>            if (isOnline && database) {<br>                await database.ref('pendingApprovals/' + id).remove();<br>            } else {<br>                localStorage.setItem('pending', JSON.stringify(pendingApprovals));<br>            }<br>            <br>            updatePendingCount();<br>            showAdminTab('pending');<br>        }<br><br>        function rejectRequest(id) {<br>            pendingApprovals = pendingApprovals.filter(p => p.id !== id);<br>            localStorage.setItem('pending', JSON.stringify(pendingApprovals));<br>            updatePendingCount();<br>            showAdminTab('pending');<br>        }<br><br>        // UI Functions<br>        function renderMachines() {<br>            const list = document.getElementById('machinesList');<br>            const search = document.getElementById('searchInput').value.toLowerCase();<br>            <br>            const filtered = machines.filter(m => <br>                m.name.toLowerCase().includes(search) || <br>                m.id.toLowerCase().includes(search)<br>            );<br><br>            list.innerHTML = filtered.map(m => {<br>                const lastLog = m.logs?.[m.logs.length - 1];<br>                const breakdowns = m.logs?.filter(l => l.type === 'breakdown').length || 0;<br>                <br>                return `<br>                    <div class="machine-card glass-card p-4" onclick="openMachine('${m.id}')"><br>                        <div class="flex justify-between items-start mb-2"><br>                            <div class="flex items-center gap-3"><br>                                <div class="w-12 h-12 rounded-lg bg-slate-700 flex items-center justify-center text-sky-400 text-xl"><br>                                    <i class="fas fa-cog"></i><br>                                </div><br>                                <div><br>                                    <h3 class="font-bold text-white">${m.name}</h3><br>                                    <p class="text-xs text-sky-400 mono">${m.id}</p><br>                                </div><br>                            </div><br>                            <div class="text-right"><br>                                ${breakdowns > 0 ? `<span class="text-xs bg-rose-500/20 text-rose-400 px-2 py-1 rounded mb-1 block">${breakdowns} issues</span>` : ''}<br>                                <span class="inline-block w-3 h-3 rounded-full status-${m.status}"></span><br>                            </div><br>                        </div><br>                        <div class="flex justify-between text-xs text-slate-400"><br>                            <span><i class="fas fa-map-marker-alt mr-1"></i>${m.location || 'No location'}</span><br>                            <span>${lastLog ? timeAgo(lastLog.date) : 'No activity'}</span><br>                        </div><br>                    </div><br>                `;<br>            }).join('');<br>        }<br><br>        function openMachine(id) {<br>            currentMachineId = id;<br>            const m = machines.find(x => x.id === id);<br>            <br>            document.getElementById('modalTitle').textContent = m.name;<br>            document.getElementById('machineDetails').innerHTML = `<br>                <div class="glass-card p-3 mb-3"><br>                    <div class="grid grid-cols-2 gap-2 text-sm"><br>                        <div><span class="text-slate-400">ID:</span> <span class="mono text-sky-400">${m.id}</span></div><br>                        <div><span class="text-slate-400">Status:</span> <span class="capitalize">${m.status}</span></div><br>                        <div><span class="text-slate-400">Location:</span> ${m.location || '-'}</div><br>                        <div><span class="text-slate-400">Manufacturer:</span> ${m.manufacturer || '-'}</div><br>                    </div><br>                </div><br>            `;<br>            <br>            renderLogs(m);<br>            showModal('machineModal');<br>        }<br><br>        function renderLogs(machine) {<br>            const logs = machine.logs?.sort((a, b) => new Date(b.date) - new Date(a.date)) || [];<br>            document.getElementById('logsList').innerHTML = logs.map(log => `<br>                <div class="glass-card p-3 border-l-4 ${log.severity === 'critical' ? 'border-rose-500' : log.severity === 'high' ? 'border-orange-500' : 'border-sky-500'}"><br>                    <div class="flex justify-between items-start mb-2"><br>                        <div><br>                            <span class="tag ${log.type === 'breakdown' ? 'bg-rose-500/20 text-rose-400' : 'bg-sky-500/20 text-sky-400'}">${log.type}</span><br>                            ${log.alarmCode ? `<span class="tag bg-amber-500/10 text-amber-400 mono ml-1">${log.alarmCode}</span>` : ''}<br>                        </div><br>                        <span class="text-xs text-slate-500">${timeAgo(log.date)}</span><br>                    </div><br>                    <p class="text-sm text-slate-300 mb-1"><span class="text-rose-400">Issue:</span> ${log.issue}</p><br>                    <p class="text-sm text-emerald-300 mb-2"><span class="text-emerald-400">Fix:</span> ${log.solution}</p><br>                    ${log.parts?.length ? `<p class="text-xs text-slate-400"><i class="fas fa-boxes mr-1"></i>${log.parts.map(p => p.name).join(', ')}</p>` : ''}<br>                    <div class="flex justify-between items-center mt-2 pt-2 border-t border-slate-700 text-xs text-slate-500"><br>                        <span><i class="fas fa-user mr-1"></i>${log.technician}</span><br>                        ${log.approved ? `<span class="text-emerald-500"><i class="fas fa-check mr-1"></i>${log.approvedBy}</span>` : '<span class="text-amber-500"><i class="fas fa-clock mr-1"></i>Pending</span>'}<br>                    </div><br>                </div><br>            `).join('');<br>        }<br><br>        function searchAlarms() {<br>            const query = document.getElementById('alarmSearch').value.toLowerCase();<br>            if (!query) return;<br>            <br>            const results = [];<br>            machines.forEach(m => {<br>                m.logs?.forEach(log => {<br>                    if ((log.alarmCode?.toLowerCase().includes(query) || <br>                         log.issue?.toLowerCase().includes(query) ||<br>                         log.solution?.toLowerCase().includes(query)) && <br>                        log.type === 'breakdown') {<br>                        results.push({...log, machineName: m.name});<br>                    }<br>                });<br>            });<br>            <br>            document.getElementById('searchResults').innerHTML = results.map(r => `<br>                <div class="glass-card p-3 cursor-pointer" onclick="showSolution('${r.id}')"><br>                    <div class="flex justify-between items-start mb-1"><br>                        <span class="tag bg-rose-500/20 text-rose-400 text-xs">${r.severity}</span><br>                        <span class="text-xs text-slate-500">${new Date(r.date).toLocaleDateString()}</span><br>                    </div><br>                    <h4 class="font-bold text-white mono mb-1">${r.alarmCode || 'No Code'}</h4><br>                    <p class="text-xs text-slate-400 mb-1">${r.machineName}</p><br>                    <p class="text-sm text-emerald-300 bg-emerald-500/10 rounded p-2 mt-2"><br>                        <i class="fas fa-wrench mr-1"></i>${r.solution.substring(0, 100)}...<br>                    </p><br>                </div><br>            `).join('');<br>        }<br><br>        function showSolution(id) {<br>            // Show full solution in alert or expand<br>            alert('Full solution details shown here');<br>        }<br><br>        // Admin Functions<br>        function showAdmin() {<br>            if (!currentUser || currentUser.role !== 'admin') {<br>                alert('Admin access required');<br>                return;<br>            }<br>            showModal('adminModal');<br>            showAdminTab('pending');<br>        }<br><br>        function showAdminTab(tab) {<br>            document.getElementById('tab-pending').className = tab === 'pending' ? 'flex-1 py-2 bg-purple-600 rounded-lg text-sm font-bold' : 'flex-1 py-2 bg-slate-700 rounded-lg text-sm';<br>            document.getElementById('tab-codes').className = tab === 'codes' ? 'flex-1 py-2 bg-purple-600 rounded-lg text-sm font-bold' : 'flex-1 py-2 bg-slate-700 rounded-lg text-sm';<br>            <br>            const content = document.getElementById('adminContent');<br>            if (tab === 'pending') {<br>                const pending = pendingApprovals.filter(p => p.status === 'pending');<br>                content.innerHTML = pending.length ? pending.map(req => `<br>                    <div class="approval-card"><br>                        <div class="flex justify-between items-start mb-2"><br>                            <div><br>                                <span class="tag ${req.type === 'delete_machine' ? 'bg-rose-500/20 text-rose-400' : 'bg-sky-500/20 text-sky-400'} text-xs"><br>                                    ${req.type === 'delete_machine' ? 'DELETE' : 'NEW LOG'}<br>                                </span><br>                                <h4 class="font-bold text-white mt-1">${req.machineName}</h4><br>                                <p class="text-xs text-slate-400">By ${req.submittedBy}</p><br>                            </div><br>                        </div><br>                        ${req.type === 'new_log' ? `<br>                            <div class="bg-slate-900/50 rounded p-2 mb-2 text-sm"><br>                                <p class="text-amber-400 mono">${req.data.alarmCode || 'No alarm code'}</p><br>                                <p class="text-slate-300">${req.data.issue}</p><br>                            </div><br>                        ` : '<p class="text-rose-300 text-sm mb-2">Request to delete machine</p>'}<br>                        <div class="flex gap-2"><br>                            <button onclick="approveRequest('${req.id}')" class="flex-1 py-2 bg-emerald-600 rounded-lg text-sm font-bold"><br>                                <i class="fas fa-check mr-1"></i>Approve<br>                            </button><br>                            <button onclick="rejectRequest('${req.id}')" class="flex-1 py-2 bg-slate-700 rounded-lg text-sm"><br>                                <i class="fas fa-times mr-1"></i>Reject<br>                            </button><br>                        </div><br>                    </div><br>                `).join('') : '<p class="text-center text-slate-500 py-8">No pending approvals</p>';<br>            } else {<br>                content.innerHTML = `<br>                    <div class="glass-card p-4 mb-3"><br>                        <div class="flex justify-between items-center"><br>                            <div><br>                                <p class="font-bold text-white">Technician</p><br>                                <p class="text-xs text-slate-400">Code: TECH12</p><br>                            </div><br>                            <span class="tag bg-emerald-500/20 text-emerald-400">Active</span><br>                        </div><br>                    </div><br>                    <div class="glass-card p-4"><br>                        <div class="flex justify-between items-center"><br>                            <div><br>                                <p class="font-bold text-white">Administrator</p><br>                                <p class="text-xs text-slate-400">Code: ADMIN9</p><br>                            </div><br>                            <span class="tag bg-emerald-500/20 text-emerald-400">Active</span><br>                        </div><br>                    </div><br>                `;<br>            }<br>        }<br><br>        // Helper Functions<br>        function updateStats() {<br>            document.getElementById('statTotal').textContent = machines.length;<br>            document.getElementById('statOp').textContent = machines.filter(m => m.status === 'operational').length;<br>            document.getElementById('statDown').textContent = machines.filter(m => m.status === 'down').length;<br>        }<br><br>        function updatePendingCount() {<br>            const count = pendingApprovals.filter(p => p.status === 'pending').length;<br>            document.getElementById('statPending').textContent = count;<br>            document.getElementById('pendingBadge').textContent = count;<br>            <br>            if (count > 0 && currentUser?.role === 'admin') {<br>                document.getElementById('adminDot').classList.remove('hidden');<br>            } else {<br>                document.getElementById('adminDot').classList.add('hidden');<br>            }<br>        }<br><br>        function updateSyncStatus() {<br>            const el = document.getElementById('syncStatus');<br>            if (isOnline) {<br>                el.className = 'sync-status sync-online';<br>                el.innerHTML = '<i class="fas fa-wifi"></i> Online';<br>            } else {<br>                el.className = 'sync-status sync-offline';<br>                el.innerHTML = '<i class="fas fa-wifi-slash"></i> Offline';<br>            }<br>        }<br><br>        function timeAgo(dateStr) {<br>            const date = new Date(dateStr);<br>            const now = new Date();<br>            const mins = Math.floor((now - date) / 60000);<br>            if (mins < 60) return mins + 'm ago';<br>            const hours = Math.floor(mins / 60);<br>            if (hours < 24) return hours + 'h ago';<br>            return Math.floor(hours / 24) + 'd ago';<br>        }<br><br>        function addPart() {<br>            const div = document.createElement('div');<br>            div.className = 'flex gap-2';<br>            div.innerHTML = `<br>                <input type="text" placeholder="Part name" class="input-field flex-1 text-sm"><br>                <input type="text" placeholder="Part #" class="input-field w-24 text-sm mono"><br>                <input type="number" placeholder="Qty" value="1" class="input-field w-16 text-sm text-center"><br>                <button type="button" onclick="this.parentElement.remove()" class="text-rose-400 px-2"><i class="fas fa-times"></i></button><br>            `;<br>            document.getElementById('partsList').appendChild(div);<br>        }<br><br>        function toggleSeverity(type) {<br>            document.getElementById('severityField').style.display = type === 'breakdown' ? 'block' : 'none';<br>        }<br><br>        // Navigation<br>        function showMain() {<br>            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));<br>            document.getElementById('nav-home').classList.add('active');<br>            closeAllModals();<br>        }<br><br>        function showSearch() {<br>            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));<br>            document.getElementById('nav-search').classList.add('active');<br>            showModal('searchModal');<br>        }<br><br>        function showProfile() {<br>            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));<br>            document.getElementById('nav-profile').classList.add('active');<br>            showModal('profileModal');<br>        }<br><br>        function showAddLog() {<br>            showModal('addLogModal');<br>        }<br><br>        function showBreakdowns() {<br>            const m = machines.find(x => x.id === currentMachineId);<br>            const breakdowns = m.logs?.filter(l => l.type === 'breakdown') || [];<br>            alert(`${breakdowns.length} breakdowns recorded for this machine`);<br>        }<br><br>        // Modal Controls<br>        function showModal(id) {<br>            document.getElementById(id).classList.add('active');<br>        }<br><br>        function closeModal(id) {<br>            document.getElementById(id).classList.remove('active');<br>        }<br><br>        function closeAllModals() {<br>            document.querySelectorAll('.modal').forEach(m => m.classList.remove('active'));<br>        }<br><br>        function filterMachines() {<br>            renderMachines();<br>        }<br>    </script><br><br></body></html>
